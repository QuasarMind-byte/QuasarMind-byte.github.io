{{/* 参数解析 */}}
{{ $src := .Get "src" | default "/images/default-avatar.png" }}
{{ $alt := .Get "alt" | default "用户头像" }}
{{ $size := .Get "size" | default "200" }}
{{ $border := .Get "border" | default "2" }}
{{ $border_color := .Get "border_color" | default "#ffffff" }}
{{ $hover_effect := .Get "hover_effect" | default "scale" }}
{{ $link := .Get "link" | default false }}
{{ $name := .Get "name" | default "" }}
{{ $title := .Get "title" | default "" }}
{{ $class := .Get "class" | default "" }}

{{/* 计算尺寸 */}}
{{ $img_size := printf "%sx%s" $size $size }}
{{ $border_size := printf "%spx" $border }}

{{/* 悬停效果类 */}}
{{ $hover_class := "" }}
{{ if eq $hover_effect "scale" }}
{{ $hover_class = "hover-scale" }}
{{ else if eq $hover_effect "rotate" }}
{{ $hover_class = "hover-rotate" }}
{{ else if eq $hover_effect "shadow" }}
{{ $hover_class = "hover-shadow" }}
{{ end }}

{{/* 头像容器 */}}
<div class="avatar-container {{ $class }}" style="max-width: {{ $size }}px;">
  {{ if $link }}
  <a href="{{ $link }}" class="avatar-link">
    {{ end }}

    <div class="avatar-circle {{ $hover_class }}"
      style="width: {{ $size }}px; height: {{ $size }}px; border: {{ $border_size }} solid {{ $border_color }};">
      {{ if $src }}
      <img src="{{ $src | relURL }}" alt="{{ $alt }}" class="avatar-image" style="width: 100%; height: 100%;"
        loading="lazy">
      {{ else }}
      <div class="avatar-placeholder" style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);">
        {{ if $name }}
        {{ substr $name 0 1 | upper }}
        {{ else }}
        <i class="fas fa-user"></i>
        {{ end }}
      </div>
      {{ end }}
    </div>

    {{ if $link }}
  </a>
  {{ end }}

  {{/* 用户信息 */}}
  {{ if or $name $title }}
  <div class="avatar-info hx:from-gray-900 hx:to-gray-600 hx:dark:from-gray-100 hx:dark:to-gray-400">
    {{ if $name }}<div class="avatar-name">{{ $name }}</div>{{ end }}
    {{ if $title }}<div class="avatar-title">{{ $title }}</div>{{ end }}
  </div>
  {{ end }}
  <br>
  <strong style="color: purple;">“只有经过地狱般的磨砺，才能练就创造天堂的力量；只有流过血的手指，才能弹出世间的绝唱。”
    ——泰戈尔</strong>
</div>

{{/* 样式定义 */}}
<style>
  .avatar-container {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin: 2rem;
  }

  .avatar-circle {
    border-radius: 50%;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  .avatar-image {
    object-fit: cover;
    border-radius: 50%;
    position: relative;
    top: 0;
  }

  .avatar-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;

    font-size: calc({
        {
        $size
      }
    }

    px * 0.5);
  font-weight: bold;
  }

  .avatar-info {
    margin-top: 0.5rem;
  }

  .avatar-name {
    font-weight: 600;
    font-size: 1.1rem;
    color: #a7a5a5;
  }

  .avatar-title {
    font-size: 0.9rem;
    color: #666;
    margin-top: 0.25rem;
  }

  /* 悬停效果 */
  .hover-scale:hover {
    transform: scale(1.05);
  }

  .hover-rotate:hover {
    transform: rotate(5deg);
  }

  .hover-shadow:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }

  /* 响应式调整 */
  @media (max-width: 768px) {
    .avatar-container {
      margin: 0.5rem;
    }

    .avatar-name {
      font-size: 1rem;
    }

    .avatar-title {
      font-size: 0.85rem;
    }
  }
</style>